#

#### 什么时候建议去 Slave 拉取消息

***剩余未拉取消息的内存大小超过了允许使用的最大内存阔值（物理内存的 40%）***

本次拉取消息时，判断未拉取的消息大小是否超过了物理内存的 40%，如果超过了，就建议去 Slave 拉取消息。

从另一个方面说，未拉取的消息太多了，多到已经超过了内存能容纳的值，这种情况下拉取消息就可能需要读取磁盘上文件的数据，性能会比较差，所以，建议从 Slave 拉取。

```java
// diff: 剩余未拉取消息的大小

// memory: 消息使用物理内存的最大比例，默认为 40%，
// 即 RocketMQ 在内存中的消息最大占用物理内存的 40%
setSuggestPullingFromSlave(diff > memory);

```